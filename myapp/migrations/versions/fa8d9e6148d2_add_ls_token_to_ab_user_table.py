"""Add ls_token to ab_user table

Revision ID: fa8d9e6148d2
Revises: c347941bd412
Create Date: 2024-04-12 12:33:55.471955

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import mysql

# revision identifiers, used by Alembic.
revision = 'fa8d9e6148d2'
down_revision = 'c347941bd412'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('ab_user', schema=None) as batch_op:
        batch_op.add_column(sa.Column('ls_token', sa.String(length=2000), nullable=True))

    with op.batch_alter_table('aihub', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('uuid',
               existing_type=mysql.VARCHAR(length=2000),
               comment='当前版本的唯一主键',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=200),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('doc',
               existing_type=mysql.VARCHAR(length=200),
               comment='文档地址',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=200),
               comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('field',
               existing_type=mysql.VARCHAR(length=200),
               comment='领域',
               existing_nullable=True)
        batch_op.alter_column('scenes',
               existing_type=mysql.VARCHAR(length=200),
               comment='应用场景',
               existing_nullable=True)
        batch_op.alter_column('type',
               existing_type=mysql.VARCHAR(length=200),
               comment='类型',
               existing_nullable=True)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=200),
               comment='中文名',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=2000),
               comment='描述',
               existing_nullable=True)
        batch_op.alter_column('source',
               existing_type=mysql.VARCHAR(length=200),
               comment='来源',
               existing_nullable=True)
        batch_op.alter_column('pic',
               existing_type=mysql.VARCHAR(length=500),
               comment='示例图片',
               existing_nullable=True)
        batch_op.alter_column('images',
               existing_type=mysql.VARCHAR(length=200),
               comment='docker镜像',
               existing_nullable=True)
        batch_op.alter_column('dataset',
               existing_type=mysql.TEXT(),
               comment='数据集的配置',
               existing_nullable=True)
        batch_op.alter_column('notebook',
               existing_type=mysql.VARCHAR(length=2000),
               comment='notebook的配置',
               existing_nullable=True)
        batch_op.alter_column('job_template',
               existing_type=mysql.TEXT(),
               comment='任务模板参数',
               existing_nullable=True)
        batch_op.alter_column('pipeline',
               existing_type=mysql.TEXT(),
               comment='pipeline微调的配置',
               existing_nullable=True)
        batch_op.alter_column('pre_train_model',
               existing_type=mysql.VARCHAR(length=2000),
               comment='预训练模型地址',
               existing_nullable=True)
        batch_op.alter_column('inference',
               existing_type=mysql.TEXT(),
               comment='推理服务的配置',
               existing_nullable=True)
        batch_op.alter_column('service',
               existing_type=mysql.TEXT(),
               comment='服务化参数',
               existing_nullable=True)
        batch_op.alter_column('version',
               existing_type=mysql.VARCHAR(length=200),
               comment='版本',
               existing_nullable=True)
        batch_op.alter_column('hot',
               existing_type=mysql.INTEGER(),
               comment='热度',
               existing_nullable=True)
        batch_op.alter_column('price',
               existing_type=mysql.INTEGER(),
               comment='价格',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.TEXT(),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('dataset', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=200),
               comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=200),
               comment='中文名',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=2000),
               comment='描述',
               existing_nullable=True)
        batch_op.alter_column('version',
               existing_type=mysql.VARCHAR(length=200),
               comment='版本',
               existing_nullable=True)
        batch_op.alter_column('subdataset',
               existing_type=mysql.VARCHAR(length=200),
               comment=' 数据子集名称，例如英文数据子集，中文数据子集',
               existing_nullable=True)
        batch_op.alter_column('split',
               existing_type=mysql.VARCHAR(length=200),
               comment=' train test val等',
               existing_nullable=True)
        batch_op.alter_column('segment',
               existing_type=mysql.TEXT(),
               comment='可以追加数据块，避免整块更新，记录分区信息。分区名，文件文件信息',
               existing_nullable=True)
        batch_op.alter_column('doc',
               existing_type=mysql.VARCHAR(length=200),
               comment='数据集的文档页面',
               existing_nullable=True)
        batch_op.alter_column('source_type',
               existing_type=mysql.VARCHAR(length=200),
               comment='数据集来源，开源，资产，采购',
               existing_nullable=True)
        batch_op.alter_column('source',
               existing_type=mysql.VARCHAR(length=200),
               comment='数据集来源，github, 天池',
               existing_nullable=True)
        batch_op.alter_column('industry',
               existing_type=mysql.VARCHAR(length=200),
               comment='行业',
               existing_nullable=True)
        batch_op.alter_column('icon',
               existing_type=mysql.VARCHAR(length=2000),
               comment='图标svg内容',
               existing_nullable=True)
        batch_op.alter_column('field',
               existing_type=mysql.VARCHAR(length=200),
               comment='数据领域，视觉，听觉，文本',
               existing_nullable=True)
        batch_op.alter_column('usage',
               existing_type=mysql.VARCHAR(length=200),
               comment='数据用途',
               existing_nullable=True)
        batch_op.alter_column('research',
               existing_type=mysql.VARCHAR(length=200),
               comment='研究方向',
               existing_nullable=True)
        batch_op.alter_column('storage_class',
               existing_type=mysql.VARCHAR(length=200),
               comment='存储类型，压缩',
               existing_nullable=True)
        batch_op.alter_column('file_type',
               existing_type=mysql.VARCHAR(length=200),
               comment='文件类型，图片 png，音频',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=200),
               comment='文件类型  有待校验，已下线',
               existing_nullable=True)
        batch_op.alter_column('years',
               existing_type=mysql.VARCHAR(length=200),
               comment='年份',
               existing_nullable=True)
        batch_op.alter_column('url',
               existing_type=mysql.VARCHAR(length=1000),
               comment='关联url',
               existing_nullable=True)
        batch_op.alter_column('path',
               existing_type=mysql.VARCHAR(length=400),
               comment='本地的持久化路径',
               existing_nullable=True)
        batch_op.alter_column('download_url',
               existing_type=mysql.VARCHAR(length=1000),
               comment='下载地址',
               existing_nullable=True)
        batch_op.alter_column('storage_size',
               existing_type=mysql.VARCHAR(length=200),
               comment='存储大小',
               existing_nullable=True)
        batch_op.alter_column('entries_num',
               existing_type=mysql.VARCHAR(length=200),
               comment='记录数目',
               existing_nullable=True)
        batch_op.alter_column('duration',
               existing_type=mysql.VARCHAR(length=200),
               comment='时长',
               existing_nullable=True)
        batch_op.alter_column('price',
               existing_type=mysql.VARCHAR(length=200),
               comment='价格',
               existing_nullable=True)
        batch_op.alter_column('secret',
               existing_type=mysql.VARCHAR(length=200),
               comment='秘钥，数据集的秘钥',
               existing_nullable=True)
        batch_op.alter_column('info',
               existing_type=mysql.TEXT(),
               comment='数据集，内容信息',
               existing_nullable=True)
        batch_op.alter_column('features',
               existing_type=mysql.TEXT(),
               comment='特征信息',
               existing_nullable=True)
        batch_op.alter_column('metric_info',
               existing_type=mysql.TEXT(),
               comment='数据集，指标信息',
               existing_nullable=True)
        batch_op.alter_column('owner',
               existing_type=mysql.VARCHAR(length=200),
               comment='责任人，*表示全部可见',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('dimension', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('sqllchemy_uri',
               existing_type=mysql.VARCHAR(length=255),
               comment='sql链接串',
               existing_nullable=True)
        batch_op.alter_column('table_name',
               existing_type=mysql.VARCHAR(length=255),
               comment='表名',
               existing_nullable=True)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=255),
               comment='中文名',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=2000),
               comment='描述',
               existing_nullable=True)
        batch_op.alter_column('app',
               existing_type=mysql.VARCHAR(length=255),
               comment='应用名',
               existing_nullable=True)
        batch_op.alter_column('owner',
               existing_type=mysql.VARCHAR(length=2000),
               comment='责任人',
               existing_nullable=True)
        batch_op.alter_column('columns',
               existing_type=mysql.TEXT(),
               comment='列信息',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.INTEGER(),
               comment='状态',
               existing_nullable=True)

    with op.batch_alter_table('docker', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=200),
               comment='描述',
               existing_nullable=True)
        batch_op.alter_column('base_image',
               existing_type=mysql.VARCHAR(length=200),
               comment='基础镜像',
               existing_nullable=True)
        batch_op.alter_column('target_image',
               existing_type=mysql.VARCHAR(length=200),
               comment='目标镜像',
               existing_nullable=True)
        batch_op.alter_column('last_image',
               existing_type=mysql.VARCHAR(length=200),
               comment='最后生成镜像',
               existing_nullable=True)
        batch_op.alter_column('need_gpu',
               existing_type=mysql.TINYINT(display_width=1),
               comment='是否需要gpu',
               existing_nullable=True)
        batch_op.alter_column('consecutive_build',
               existing_type=mysql.TINYINT(display_width=1),
               comment='连续构建',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('etl_pipeline', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=200),
               comment='描述',
               existing_nullable=False)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('workflow',
               existing_type=mysql.VARCHAR(length=200),
               comment='调度引擎',
               existing_nullable=True)
        batch_op.alter_column('dag_json',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='pipeline的上下游关系',
               existing_nullable=True)
        batch_op.alter_column('config',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='pipeline的全局配置',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('etl_task', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=200),
               comment='描述',
               existing_nullable=False)
        batch_op.alter_column('etl_pipeline_id',
               existing_type=mysql.INTEGER(),
               comment='任务流id',
               existing_nullable=True)
        batch_op.alter_column('template',
               existing_type=mysql.VARCHAR(length=100),
               comment='任务模板',
               existing_nullable=False)
        batch_op.alter_column('task_args',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='任务参数',
               existing_nullable=True)
        batch_op.alter_column('etl_task_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='远程调度系统任务id',
               existing_nullable=False)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('favorite', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('model_name',
               existing_type=mysql.VARCHAR(length=100),
               comment='数据结构',
               existing_nullable=False)
        batch_op.alter_column('row_id',
               existing_type=mysql.VARCHAR(length=500),
               comment='数据id',
               existing_nullable=False)
        batch_op.alter_column('user_id',
               existing_type=mysql.INTEGER(),
               comment='用户id',
               existing_nullable=True)

    with op.batch_alter_table('images', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=200),
               type_=sa.String(length=500),
               comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('describe',
               existing_type=mysql.TEXT(),
               type_=sa.String(length=1000),
               comment='描述',
               existing_nullable=False)
        batch_op.alter_column('repository_id',
               existing_type=mysql.INTEGER(),
               comment='仓库id',
               existing_nullable=True)
        batch_op.alter_column('entrypoint',
               existing_type=mysql.VARCHAR(length=2000),
               comment='入口点',
               existing_nullable=True)
        batch_op.alter_column('dockerfile',
               existing_type=mysql.TEXT(),
               comment='dockerfile',
               existing_nullable=True)
        batch_op.alter_column('gitpath',
               existing_type=mysql.VARCHAR(length=200),
               comment='git地址',
               existing_nullable=True)

    with op.batch_alter_table('inferenceservice', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=100),
               comment='中文名',
               existing_nullable=False)
        batch_op.alter_column('service_type',
               existing_type=mysql.VARCHAR(length=100),
               comment='服务类型',
               existing_nullable=True)
        batch_op.alter_column('model_name',
               existing_type=mysql.VARCHAR(length=200),
               comment='模型名',
               existing_nullable=True)
        batch_op.alter_column('model_version',
               existing_type=mysql.VARCHAR(length=200),
               comment='模型版本',
               existing_nullable=True)
        batch_op.alter_column('model_path',
               existing_type=mysql.VARCHAR(length=200),
               comment='模型地址',
               existing_nullable=True)
        batch_op.alter_column('model_type',
               existing_type=mysql.VARCHAR(length=200),
               comment='模型类型',
               existing_nullable=True)
        batch_op.alter_column('model_input',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='模型输入',
               existing_nullable=True)
        batch_op.alter_column('model_output',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='模型输出',
               existing_nullable=True)
        batch_op.alter_column('inference_config',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='配置文件',
               existing_nullable=True)
        batch_op.alter_column('model_status',
               existing_type=mysql.VARCHAR(length=200),
               comment='服务状态',
               existing_nullable=True)
        batch_op.alter_column('transformer',
               existing_type=mysql.VARCHAR(length=200),
               comment='预处理',
               existing_nullable=True)
        batch_op.alter_column('images',
               existing_type=mysql.VARCHAR(length=200),
               comment='镜像',
               existing_nullable=False)
        batch_op.alter_column('working_dir',
               existing_type=mysql.VARCHAR(length=100),
               comment='启动目录',
               existing_nullable=True)
        batch_op.alter_column('command',
               existing_type=mysql.VARCHAR(length=1000),
               comment='启动命令',
               existing_nullable=True)
        batch_op.alter_column('args',
               existing_type=mysql.TEXT(),
               comment='启动参数',
               existing_nullable=True)
        batch_op.alter_column('env',
               existing_type=mysql.TEXT(),
               comment='环境变量',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=mysql.VARCHAR(length=200),
               type_=sa.String(length=2000),
               comment='挂载',
               existing_nullable=True)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=100),
               comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('min_replicas',
               existing_type=mysql.INTEGER(),
               comment='最小副本数',
               existing_nullable=True)
        batch_op.alter_column('max_replicas',
               existing_type=mysql.INTEGER(),
               comment='最大副本数',
               existing_nullable=True)
        batch_op.alter_column('hpa',
               existing_type=mysql.VARCHAR(length=400),
               comment='弹性伸缩',
               existing_nullable=True)
        batch_op.alter_column('metrics',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='监控接口',
               existing_nullable=True)
        batch_op.alter_column('health',
               existing_type=mysql.VARCHAR(length=400),
               comment='健康检查',
               existing_nullable=True)
        batch_op.alter_column('sidecar',
               existing_type=mysql.VARCHAR(length=400),
               comment='伴随容器',
               existing_nullable=True)
        batch_op.alter_column('ports',
               existing_type=mysql.VARCHAR(length=100),
               comment='端口',
               existing_nullable=True)
        batch_op.alter_column('resource_memory',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请内存',
               existing_nullable=True)
        batch_op.alter_column('resource_cpu',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请cpu',
               existing_nullable=True)
        batch_op.alter_column('resource_gpu',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请gpu',
               existing_nullable=True)
        batch_op.alter_column('deploy_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='部署时间',
               existing_nullable=True)
        batch_op.alter_column('host',
               existing_type=mysql.VARCHAR(length=200),
               comment='域名',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('canary',
               existing_type=mysql.VARCHAR(length=400),
               comment='灰度发布',
               existing_nullable=True)
        batch_op.alter_column('shadow',
               existing_type=mysql.VARCHAR(length=400),
               comment='灰度发布',
               existing_nullable=True)
        batch_op.alter_column('run_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='run id',
               existing_nullable=True)
        batch_op.alter_column('run_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='运行时间',
               existing_nullable=True)
        batch_op.alter_column('deploy_history',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='部署历史',
               existing_nullable=True)
        batch_op.alter_column('priority',
               existing_type=mysql.INTEGER(),
               comment='优先级',
               existing_nullable=True)

    with op.batch_alter_table('job_template', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               type_=sa.String(length=500),
               comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('version',
               existing_type=mysql.ENUM('Release', 'Alpha'),
               comment='版本',
               existing_nullable=False)
        batch_op.alter_column('images_id',
               existing_type=mysql.INTEGER(),
               comment='镜像id',
               existing_nullable=True)
        batch_op.alter_column('hostAliases',
               existing_type=mysql.TEXT(),
               comment='域名映射',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.TEXT(),
               type_=sa.String(length=500),
               comment='描述',
               existing_nullable=False)
        batch_op.alter_column('workdir',
               existing_type=mysql.VARCHAR(length=400),
               comment='工作目录',
               existing_nullable=True)
        batch_op.alter_column('entrypoint',
               existing_type=mysql.VARCHAR(length=2000),
               comment='入口点',
               existing_nullable=True)
        batch_op.alter_column('args',
               existing_type=mysql.TEXT(),
               comment='启动参数',
               existing_nullable=True)
        batch_op.alter_column('env',
               existing_type=mysql.TEXT(),
               comment='默认自带的环境变量',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=mysql.VARCHAR(length=400),
               type_=sa.String(length=2000),
               comment='强制必须挂载',
               existing_nullable=True)
        batch_op.alter_column('privileged',
               existing_type=mysql.TINYINT(display_width=1),
               comment=' 是否启用特权模式',
               existing_nullable=True)
        batch_op.alter_column('accounts',
               existing_type=mysql.VARCHAR(length=100),
               comment='使用k8s账户',
               existing_nullable=True)
        batch_op.alter_column('demo',
               existing_type=mysql.TEXT(),
               comment='配置示例',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('logs', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('user_id',
               existing_type=mysql.INTEGER(),
               comment='用户id',
               existing_nullable=True)
        batch_op.alter_column('action',
               existing_type=mysql.VARCHAR(length=512),
               comment='动作',
               existing_nullable=True)
        batch_op.alter_column('method',
               existing_type=mysql.VARCHAR(length=50),
               comment='方法',
               existing_nullable=True)
        batch_op.alter_column('path',
               existing_type=mysql.VARCHAR(length=200),
               comment='访问地址',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.INTEGER(),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('json',
               existing_type=mysql.TEXT(),
               comment='请求提',
               existing_nullable=True)
        batch_op.alter_column('dttm',
               existing_type=mysql.DATETIME(),
               comment='访问时间',
               existing_nullable=True)
        batch_op.alter_column('duration_ms',
               existing_type=mysql.INTEGER(),
               comment='持续时长',
               existing_nullable=True)
        batch_op.alter_column('referrer',
               existing_type=mysql.VARCHAR(length=1024),
               comment='来源地址',
               existing_nullable=True)

    with op.batch_alter_table('metadata_metric', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('app',
               existing_type=mysql.VARCHAR(length=100),
               comment='应用名',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=300),
               comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=300),
               comment='中文名',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=500),
               comment='描述',
               existing_nullable=False)
        batch_op.alter_column('caliber',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='数据负责人',
               existing_nullable=True)
        batch_op.alter_column('metric_type',
               existing_type=mysql.VARCHAR(length=100),
               comment='指标类型  \t原子指标  衍生指标',
               existing_nullable=True)
        batch_op.alter_column('metric_level',
               existing_type=mysql.VARCHAR(length=100),
               comment='指标等级   普通  重要  核心',
               existing_nullable=True)
        batch_op.alter_column('metric_dim',
               existing_type=mysql.VARCHAR(length=100),
               comment='指标维度   天  月   周',
               existing_nullable=True)
        batch_op.alter_column('metric_data_type',
               existing_type=mysql.VARCHAR(length=100),
               comment='指标类型  营收/规模/商业化',
               existing_nullable=True)
        batch_op.alter_column('metric_responsible',
               existing_type=mysql.VARCHAR(length=200),
               comment='指标负责人',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment='状态  下线  上线   创建中',
               existing_nullable=True)
        batch_op.alter_column('task_id',
               existing_type=mysql.VARCHAR(length=200),
               comment='所有相关任务id',
               existing_nullable=True)
        batch_op.alter_column('public',
               existing_type=mysql.TINYINT(display_width=1),
               comment='是否公开',
               existing_nullable=True)
        batch_op.alter_column('remark',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='备注',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('metadata_table', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('node_id',
               existing_type=mysql.VARCHAR(length=200),
               comment='唯一性id',
               existing_nullable=True)
        batch_op.alter_column('app',
               existing_type=mysql.VARCHAR(length=200),
               comment='所属应用',
               existing_nullable=True)
        batch_op.alter_column('c_org_fullname',
               existing_type=mysql.VARCHAR(length=255),
               comment='所属组织架构',
               existing_nullable=True)
        batch_op.alter_column('db',
               existing_type=mysql.VARCHAR(length=200),
               comment='库名',
               existing_nullable=True)
        batch_op.alter_column('table',
               existing_type=mysql.VARCHAR(length=400),
               comment='表名',
               existing_nullable=True)
        batch_op.alter_column('metadata_column',
               existing_type=mysql.TEXT(),
               comment='列信息',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=200),
               comment='描述',
               existing_nullable=True)
        batch_op.alter_column('owner',
               existing_type=mysql.VARCHAR(length=200),
               comment='责任人',
               existing_nullable=True)
        batch_op.alter_column('lifecycle',
               existing_type=mysql.INTEGER(),
               comment='生命周期',
               existing_nullable=True)
        batch_op.alter_column('rec_lifecycle',
               existing_type=mysql.INTEGER(),
               comment='推荐生命周期',
               existing_nullable=True)
        batch_op.alter_column('storage_size',
               existing_type=mysql.VARCHAR(length=200),
               comment='存储大小',
               existing_nullable=True)
        batch_op.alter_column('storage_cost',
               existing_type=mysql.FLOAT(),
               comment='存储成本',
               existing_nullable=True)
        batch_op.alter_column('visits_seven',
               existing_type=mysql.INTEGER(),
               comment='7日访问量',
               existing_nullable=True)
        batch_op.alter_column('visits_thirty',
               existing_type=mysql.BIGINT(),
               comment='30日访问量',
               existing_nullable=True)
        batch_op.alter_column('visits_sixty',
               existing_type=mysql.BIGINT(),
               comment='60日访问量',
               existing_nullable=True)
        batch_op.alter_column('recent_visit',
               existing_type=sa.DATE(),
               comment='最新被访问时间',
               existing_nullable=True)
        batch_op.alter_column('partition_start',
               existing_type=mysql.VARCHAR(length=255),
               comment='分区起点',
               existing_nullable=True)
        batch_op.alter_column('partition_end',
               existing_type=mysql.VARCHAR(length=255),
               comment='分区终点',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=255),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('creator',
               existing_type=mysql.VARCHAR(length=255),
               comment='创建者',
               existing_nullable=True)
        batch_op.alter_column('create_table_ddl',
               existing_type=mysql.TEXT(),
               comment='建表语句',
               existing_nullable=True)
        batch_op.alter_column('col_info',
               existing_type=mysql.TEXT(),
               comment='列信息',
               existing_nullable=True)
        batch_op.alter_column('partition_update_mode',
               existing_type=mysql.INTEGER(),
               comment='分区更新模式',
               existing_nullable=True)
        batch_op.alter_column('is_privilege',
               existing_type=mysql.INTEGER(),
               comment='是否特权',
               existing_nullable=False)
        batch_op.alter_column('data_source',
               existing_type=mysql.INTEGER(),
               comment='数据来源',
               existing_nullable=True)
        batch_op.alter_column('field',
               existing_type=mysql.VARCHAR(length=200),
               comment='所属数据域',
               existing_nullable=True)
        batch_op.alter_column('security_level',
               existing_type=mysql.VARCHAR(length=200),
               comment='安全等级',
               existing_nullable=True)
        batch_op.alter_column('value_score',
               existing_type=mysql.VARCHAR(length=200),
               comment='价值评估',
               existing_nullable=True)
        batch_op.alter_column('warehouse_level',
               existing_type=mysql.VARCHAR(length=200),
               comment='数仓级别',
               existing_nullable=True)
        batch_op.alter_column('ttl',
               existing_type=mysql.VARCHAR(length=200),
               comment='保留时长',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('model', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('version',
               existing_type=mysql.VARCHAR(length=100),
               comment='版本',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=1000),
               comment='描述',
               existing_nullable=True)
        batch_op.alter_column('path',
               existing_type=mysql.VARCHAR(length=200),
               comment='模型路径',
               existing_nullable=True)
        batch_op.alter_column('download_url',
               existing_type=mysql.VARCHAR(length=200),
               comment='下载url',
               existing_nullable=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('pipeline_id',
               existing_type=mysql.INTEGER(),
               comment='任务流id',
               existing_nullable=True)
        batch_op.alter_column('run_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='run id',
               existing_nullable=False)
        batch_op.alter_column('run_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='运行时间',
               existing_nullable=True)
        batch_op.alter_column('framework',
               existing_type=mysql.VARCHAR(length=100),
               comment='训练框架',
               existing_nullable=True)
        batch_op.alter_column('metrics',
               existing_type=mysql.TEXT(),
               comment='指标',
               existing_nullable=True)
        batch_op.alter_column('md5',
               existing_type=mysql.VARCHAR(length=200),
               comment='md5值',
               existing_nullable=True)
        batch_op.alter_column('api_type',
               existing_type=mysql.VARCHAR(length=100),
               comment='api类型',
               existing_nullable=True)

    with op.batch_alter_table('nni', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('job_type',
               existing_type=mysql.ENUM('Job'),
               comment='任务类型',
               existing_nullable=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=200),
               comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=200),
               comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.TEXT(),
               comment='描述',
               existing_nullable=True)
        batch_op.alter_column('parallel_trial_count',
               existing_type=mysql.INTEGER(),
               comment='最大并行数',
               existing_nullable=True)
        batch_op.alter_column('maxExecDuration',
               existing_type=mysql.INTEGER(),
               comment='最大执行时长',
               existing_nullable=True)
        batch_op.alter_column('max_trial_count',
               existing_type=mysql.INTEGER(),
               comment='最大搜索次数',
               existing_nullable=True)
        batch_op.alter_column('max_failed_trial_count',
               existing_type=mysql.INTEGER(),
               comment='最大失败次数',
               existing_nullable=True)
        batch_op.alter_column('objective_type',
               existing_type=mysql.ENUM('maximize', 'minimize'),
               comment='搜索目标类型',
               existing_nullable=False)
        batch_op.alter_column('objective_goal',
               existing_type=mysql.FLOAT(),
               comment='搜索目标值',
               existing_nullable=False)
        batch_op.alter_column('objective_metric_name',
               existing_type=mysql.VARCHAR(length=200),
               comment='目标度量名称',
               existing_nullable=False)
        batch_op.alter_column('objective_additional_metric_names',
               existing_type=mysql.VARCHAR(length=200),
               comment='附加目标度量名',
               existing_nullable=True)
        batch_op.alter_column('algorithm_name',
               existing_type=mysql.VARCHAR(length=200),
               comment='算法名',
               existing_nullable=False)
        batch_op.alter_column('algorithm_setting',
               existing_type=mysql.TEXT(),
               comment='算法配置',
               existing_nullable=True)
        batch_op.alter_column('parameters',
               existing_type=mysql.TEXT(),
               comment='搜索超参的配置',
               existing_nullable=True)
        batch_op.alter_column('job_json',
               existing_type=mysql.TEXT(),
               comment='根据不同算法和参数写入的task模板',
               existing_nullable=True)
        batch_op.alter_column('trial_spec',
               existing_type=mysql.TEXT(),
               comment='根据不同算法和参数写入的task模板',
               existing_nullable=True)
        batch_op.alter_column('job_worker_image',
               existing_type=mysql.VARCHAR(length=200),
               comment='执行镜像',
               existing_nullable=True)
        batch_op.alter_column('job_worker_command',
               existing_type=mysql.VARCHAR(length=200),
               comment='执行命令',
               existing_nullable=True)
        batch_op.alter_column('working_dir',
               existing_type=mysql.VARCHAR(length=200),
               comment='启动目录',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=mysql.VARCHAR(length=100),
               type_=sa.String(length=2000),
               comment='挂载',
               existing_nullable=True)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=100),
               comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('image_pull_policy',
               existing_type=mysql.ENUM('Always', 'IfNotPresent'),
               comment='镜像拉取策略',
               existing_nullable=False)
        batch_op.alter_column('resource_memory',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请内存',
               existing_nullable=True)
        batch_op.alter_column('resource_cpu',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请cpu',
               existing_nullable=True)
        batch_op.alter_column('resource_gpu',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请gpu',
               existing_nullable=True)
        batch_op.alter_column('experiment',
               existing_type=mysql.TEXT(),
               comment='构建出来的实验体',
               existing_nullable=True)
        batch_op.alter_column('alert_status',
               existing_type=mysql.VARCHAR(length=100),
               comment='哪些状态会报警Pending,Running,Succeeded,Failed,Unknown,Waiting,Terminated',
               existing_nullable=True)

    with op.batch_alter_table('notebook', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=200),
               comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.TEXT(),
               type_=sa.String(length=200),
               comment='描述',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=200),
               comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('images',
               existing_type=mysql.VARCHAR(length=200),
               comment='镜像',
               existing_nullable=True)
        batch_op.alter_column('ide_type',
               existing_type=mysql.VARCHAR(length=200),
               type_=sa.String(length=100),
               comment='ide类型',
               existing_nullable=True)
        batch_op.alter_column('working_dir',
               existing_type=mysql.VARCHAR(length=200),
               comment='工作目录',
               existing_nullable=True)
        batch_op.alter_column('env',
               existing_type=mysql.VARCHAR(length=400),
               comment='环境变量',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=mysql.VARCHAR(length=400),
               type_=sa.String(length=2000),
               comment='挂载',
               existing_nullable=True)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=200),
               comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('image_pull_policy',
               existing_type=mysql.ENUM('Always', 'IfNotPresent'),
               comment='镜像拉取策略',
               existing_nullable=True)
        batch_op.alter_column('resource_memory',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请内存',
               existing_nullable=True)
        batch_op.alter_column('resource_cpu',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请cpu',
               existing_nullable=True)
        batch_op.alter_column('resource_gpu',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请gpu',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('pipeline', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=200),
               comment='描述',
               existing_nullable=False)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('dag_json',
               existing_type=mysql.TEXT(),
               comment='上下游关系',
               existing_nullable=False)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=100),
               comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('global_env',
               existing_type=mysql.VARCHAR(length=500),
               comment='全局环境变量',
               existing_nullable=True)
        batch_op.alter_column('schedule_type',
               existing_type=mysql.ENUM('once', 'crontab'),
               comment='调度类型',
               existing_nullable=False)
        batch_op.alter_column('cron_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='调度周期',
               existing_nullable=True)
        batch_op.alter_column('cronjob_start_time',
               existing_type=mysql.VARCHAR(length=300),
               comment='定时调度补录起点',
               existing_nullable=True)
        batch_op.alter_column('pipeline_file',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=655360),
               comment='workflow yaml文件',
               existing_nullable=True)
        batch_op.alter_column('pipeline_argo_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='argo workflow id',
               existing_nullable=True)
        batch_op.alter_column('version_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='workflow version id',
               existing_nullable=True)
        batch_op.alter_column('run_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='workflow run id',
               existing_nullable=True)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=100),
               comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('image_pull_policy',
               existing_type=mysql.ENUM('Always', 'IfNotPresent'),
               comment='镜像拉取策略',
               existing_nullable=False)
        batch_op.alter_column('parallelism',
               existing_type=mysql.INTEGER(),
               comment='同一个pipeline，最大并行的task数目',
               existing_nullable=False)
        batch_op.alter_column('alert_status',
               existing_type=mysql.VARCHAR(length=100),
               comment=' 哪些状态会报警Pending,Running,Succeeded,Failed,Unknown,Waiting,Terminated',
               existing_nullable=True)
        batch_op.alter_column('alert_user',
               existing_type=mysql.VARCHAR(length=300),
               comment='报警接收人',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('depends_on_past',
               existing_type=mysql.TINYINT(display_width=1),
               comment='是否依赖过往实例',
               existing_nullable=True)
        batch_op.alter_column('max_active_runs',
               existing_type=mysql.INTEGER(),
               comment='最大同时运行的pipeline实例',
               existing_nullable=False)
        batch_op.alter_column('expired_limit',
               existing_type=mysql.INTEGER(),
               comment='过期保留个数，此数值有效时，会优先使用，覆盖max_active_runs的功能',
               existing_nullable=False)
        batch_op.alter_column('parameter',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='前端保留参数，用于记录编排样式',
               existing_nullable=True)

    with op.batch_alter_table('project', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=50),
               comment='名称',
               existing_nullable=False)
        batch_op.alter_column('describe',
               existing_type=mysql.TEXT(),
               type_=sa.String(length=500),
               comment='描述',
               existing_nullable=False)
        batch_op.alter_column('type',
               existing_type=mysql.VARCHAR(length=50),
               comment='类型，org, job_template, model',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('project_user', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('user_id',
               existing_type=mysql.INTEGER(),
               comment='用户id',
               existing_nullable=False)
        batch_op.alter_column('role',
               existing_type=mysql.ENUM('dev', 'ops', 'creator'),
               comment='角色',
               existing_nullable=False)

    with op.batch_alter_table('pytorchjob', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('cluster',
               existing_type=mysql.VARCHAR(length=100),
               comment='k8s集群',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=100),
               comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('create_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='创建时间',
               existing_nullable=True)
        batch_op.alter_column('change_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='修改时间',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('annotations',
               existing_type=mysql.TEXT(),
               comment='注释',
               existing_nullable=True)
        batch_op.alter_column('labels',
               existing_type=mysql.TEXT(),
               comment='标签',
               existing_nullable=True)
        batch_op.alter_column('spec',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=655360),
               comment='配置详情',
               existing_nullable=True)
        batch_op.alter_column('status_more',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('username',
               existing_type=mysql.VARCHAR(length=100),
               comment='用户名',
               existing_nullable=True)
        batch_op.alter_column('info_json',
               existing_type=mysql.TEXT(),
               comment='通知记录',
               existing_nullable=True)
        batch_op.alter_column('add_row_time',
               existing_type=mysql.DATETIME(),
               comment='记录时间',
               existing_nullable=True)
        batch_op.alter_column('foreign_key',
               existing_type=mysql.VARCHAR(length=100),
               comment='外键',
               existing_nullable=True)

    with op.batch_alter_table('repository', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=50),
               type_=sa.String(length=200),
               comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('server',
               existing_type=mysql.VARCHAR(length=100),
               type_=sa.String(length=200),
               comment='仓库地址',
               existing_nullable=False)
        batch_op.alter_column('user',
               existing_type=mysql.VARCHAR(length=100),
               comment='账户',
               existing_nullable=False)
        batch_op.alter_column('password',
               existing_type=mysql.VARCHAR(length=100),
               comment='密码',
               existing_nullable=False)
        batch_op.alter_column('hubsecret',
               existing_type=mysql.VARCHAR(length=100),
               comment='k8s secret名',
               existing_nullable=True)

    with op.batch_alter_table('run', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('pipeline_id',
               existing_type=mysql.INTEGER(),
               comment='任务流id',
               existing_nullable=True)
        batch_op.alter_column('pipeline_file',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=655360),
               comment='workflow yaml',
               existing_nullable=True)
        batch_op.alter_column('pipeline_argo_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='任务流 argo id',
               existing_nullable=True)
        batch_op.alter_column('version_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='上传的版本号',
               existing_nullable=True)
        batch_op.alter_column('experiment_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='实验id',
               existing_nullable=True)
        batch_op.alter_column('run_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='run id',
               existing_nullable=True)
        batch_op.alter_column('message',
               existing_type=mysql.TEXT(),
               comment='消息',
               existing_nullable=True)
        batch_op.alter_column('created_on',
               existing_type=mysql.DATETIME(),
               comment='创建时间',
               existing_nullable=False)
        batch_op.alter_column('execution_date',
               existing_type=mysql.VARCHAR(length=100),
               type_=sa.String(length=200),
               comment='执行时间',
               existing_nullable=False)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment='状态',
               existing_nullable=True)

    with op.batch_alter_table('service', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=100),
               comment='中文名',
               existing_nullable=False)
        batch_op.alter_column('images',
               existing_type=mysql.VARCHAR(length=200),
               comment='镜像',
               existing_nullable=False)
        batch_op.alter_column('working_dir',
               existing_type=mysql.VARCHAR(length=100),
               comment='启动目录',
               existing_nullable=True)
        batch_op.alter_column('command',
               existing_type=mysql.VARCHAR(length=1000),
               comment='启动命令',
               existing_nullable=True)
        batch_op.alter_column('args',
               existing_type=mysql.TEXT(),
               comment='启动参数',
               existing_nullable=True)
        batch_op.alter_column('env',
               existing_type=mysql.TEXT(),
               comment='环境变量',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=mysql.VARCHAR(length=200),
               type_=sa.String(length=2000),
               comment='挂载',
               existing_nullable=True)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=100),
               comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('replicas',
               existing_type=mysql.INTEGER(),
               comment='副本',
               existing_nullable=True)
        batch_op.alter_column('ports',
               existing_type=mysql.VARCHAR(length=100),
               comment='端口',
               existing_nullable=True)
        batch_op.alter_column('resource_memory',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请内存',
               existing_nullable=True)
        batch_op.alter_column('resource_cpu',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请cpu',
               existing_nullable=True)
        batch_op.alter_column('resource_gpu',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请gpu',
               existing_nullable=True)
        batch_op.alter_column('deploy_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='部署时间',
               existing_nullable=False)
        batch_op.alter_column('host',
               existing_type=mysql.VARCHAR(length=200),
               comment='域名',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)

    with op.batch_alter_table('sqlab_query', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('submit_time',
               existing_type=mysql.VARCHAR(length=40),
               comment='提交时间',
               existing_nullable=False)
        batch_op.alter_column('start_time',
               existing_type=mysql.VARCHAR(length=40),
               comment='启动时间',
               existing_nullable=False)
        batch_op.alter_column('end_time',
               existing_type=mysql.VARCHAR(length=40),
               comment='结束时间',
               existing_nullable=False)
        batch_op.alter_column('engine_arg1',
               existing_type=mysql.VARCHAR(length=200),
               comment='引擎参数1',
               existing_nullable=False)
        batch_op.alter_column('engine_arg2',
               existing_type=mysql.VARCHAR(length=200),
               comment='引擎参数2',
               existing_nullable=False)
        batch_op.alter_column('qsql',
               existing_type=mysql.VARCHAR(length=5000),
               comment='sql语句',
               existing_nullable=False)
        batch_op.alter_column('engine',
               existing_type=mysql.VARCHAR(length=100),
               comment='引擎',
               existing_nullable=False)
        batch_op.alter_column('deli',
               existing_type=mysql.VARCHAR(length=11),
               comment='分隔符',
               existing_nullable=False)
        batch_op.alter_column('stage',
               existing_type=mysql.VARCHAR(length=11),
               comment='阶段',
               existing_nullable=False)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=11),
               comment='状态',
               existing_nullable=False)
        batch_op.alter_column('task_id',
               existing_type=mysql.VARCHAR(length=100),
               comment='任务id',
               existing_nullable=False)
        batch_op.alter_column('log_url',
               existing_type=mysql.VARCHAR(length=400),
               comment='日志url',
               existing_nullable=False)
        batch_op.alter_column('ui_url',
               existing_type=mysql.VARCHAR(length=400),
               comment='任务url',
               existing_nullable=False)
        batch_op.alter_column('result_url',
               existing_type=mysql.VARCHAR(length=400),
               comment='结果url',
               existing_nullable=False)
        batch_op.alter_column('result_line_num',
               existing_type=mysql.VARCHAR(length=400),
               comment='结果行数',
               existing_nullable=False)
        batch_op.alter_column('err_msg',
               existing_type=mysql.VARCHAR(length=5000),
               type_=sa.Text(),
               comment='报错消息',
               existing_nullable=True)
        batch_op.alter_column('username',
               existing_type=mysql.VARCHAR(length=400),
               comment='用户名',
               existing_nullable=False)

    with op.batch_alter_table('task', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=100),
               comment='中文名',
               existing_nullable=False)
        batch_op.alter_column('job_template_id',
               existing_type=mysql.INTEGER(),
               comment='任务模板id',
               existing_nullable=True)
        batch_op.alter_column('pipeline_id',
               existing_type=mysql.INTEGER(),
               comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('working_dir',
               existing_type=mysql.VARCHAR(length=1000),
               comment='启动目录',
               existing_nullable=True)
        batch_op.alter_column('command',
               existing_type=mysql.VARCHAR(length=1000),
               comment='启动命令',
               existing_nullable=True)
        batch_op.alter_column('overwrite_entrypoint',
               existing_type=mysql.TINYINT(display_width=1),
               comment='是否覆盖模板中的入口点',
               existing_nullable=True)
        batch_op.alter_column('args',
               existing_type=mysql.TEXT(),
               comment='任务启动参数',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=mysql.VARCHAR(length=200),
               type_=sa.String(length=2000),
               comment='挂载',
               existing_nullable=True)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=100),
               comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('resource_memory',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请内存',
               existing_nullable=True)
        batch_op.alter_column('resource_cpu',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请cpu',
               existing_nullable=True)
        batch_op.alter_column('resource_gpu',
               existing_type=mysql.VARCHAR(length=100),
               comment='申请gpu',
               existing_nullable=True)
        batch_op.alter_column('timeout',
               existing_type=mysql.INTEGER(),
               comment='超时',
               existing_nullable=False)
        batch_op.alter_column('retry',
               existing_type=mysql.INTEGER(),
               comment='重试次数',
               existing_nullable=False)
        batch_op.alter_column('outputs',
               existing_type=mysql.TEXT(),
               comment='task的输出，会将输出复制到minio上 ',
               existing_nullable=True)
        batch_op.alter_column('monitoring',
               existing_type=mysql.TEXT(),
               comment='该任务的监控信息',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=65536),
               comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('skip',
               existing_type=mysql.TINYINT(display_width=1),
               comment='是否跳过',
               existing_nullable=True)

    with op.batch_alter_table('tfjob', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('cluster',
               existing_type=mysql.VARCHAR(length=100),
               comment='k8s集群',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=100),
               comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('create_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='创建时间',
               existing_nullable=True)
        batch_op.alter_column('change_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='修改时间',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('annotations',
               existing_type=mysql.TEXT(),
               comment='注释',
               existing_nullable=True)
        batch_op.alter_column('labels',
               existing_type=mysql.TEXT(),
               comment='标签',
               existing_nullable=True)
        batch_op.alter_column('spec',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=655360),
               comment='配置详情',
               existing_nullable=True)
        batch_op.alter_column('status_more',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('username',
               existing_type=mysql.VARCHAR(length=100),
               comment='用户名',
               existing_nullable=True)
        batch_op.alter_column('info_json',
               existing_type=mysql.TEXT(),
               comment='通知记录',
               existing_nullable=True)
        batch_op.alter_column('add_row_time',
               existing_type=mysql.DATETIME(),
               comment='记录时间',
               existing_nullable=True)
        batch_op.alter_column('foreign_key',
               existing_type=mysql.VARCHAR(length=100),
               comment='外键',
               existing_nullable=True)

    with op.batch_alter_table('workflow', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('cluster',
               existing_type=mysql.VARCHAR(length=100),
               comment='k8s集群',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=100),
               comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('create_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='创建时间',
               existing_nullable=True)
        batch_op.alter_column('change_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='修改时间',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('annotations',
               existing_type=mysql.TEXT(),
               comment='注释',
               existing_nullable=True)
        batch_op.alter_column('labels',
               existing_type=mysql.TEXT(),
               comment='标签',
               existing_nullable=True)
        batch_op.alter_column('spec',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=655360),
               comment='配置详情',
               existing_nullable=True)
        batch_op.alter_column('status_more',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('username',
               existing_type=mysql.VARCHAR(length=100),
               comment='用户名',
               existing_nullable=True)
        batch_op.alter_column('info_json',
               existing_type=mysql.TEXT(),
               comment='通知记录',
               existing_nullable=True)
        batch_op.alter_column('add_row_time',
               existing_type=mysql.DATETIME(),
               comment='记录时间',
               existing_nullable=True)
        batch_op.alter_column('foreign_key',
               existing_type=mysql.VARCHAR(length=100),
               comment='外键',
               existing_nullable=True)

    with op.batch_alter_table('xgbjob', schema=None) as batch_op:
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment='id主键',
               existing_nullable=False,
               autoincrement=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('cluster',
               existing_type=mysql.VARCHAR(length=100),
               comment='k8s集群',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=100),
               comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('create_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='创建时间',
               existing_nullable=True)
        batch_op.alter_column('change_time',
               existing_type=mysql.VARCHAR(length=100),
               comment='修改时间',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('annotations',
               existing_type=mysql.TEXT(),
               comment='注释',
               existing_nullable=True)
        batch_op.alter_column('labels',
               existing_type=mysql.TEXT(),
               comment='标签',
               existing_nullable=True)
        batch_op.alter_column('spec',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(length=655360),
               comment='配置详情',
               existing_nullable=True)
        batch_op.alter_column('status_more',
               existing_type=mysql.MEDIUMTEXT(),
               type_=sa.Text(),
               comment='状态',
               existing_nullable=True)
        batch_op.alter_column('username',
               existing_type=mysql.VARCHAR(length=100),
               comment='用户名',
               existing_nullable=True)
        batch_op.alter_column('info_json',
               existing_type=mysql.TEXT(),
               comment='通知记录',
               existing_nullable=True)
        batch_op.alter_column('add_row_time',
               existing_type=mysql.DATETIME(),
               comment='记录时间',
               existing_nullable=True)
        batch_op.alter_column('foreign_key',
               existing_type=mysql.VARCHAR(length=100),
               comment='外键',
               existing_nullable=True)

    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('xgbjob', schema=None) as batch_op:
        batch_op.alter_column('foreign_key',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='外键',
               existing_nullable=True)
        batch_op.alter_column('add_row_time',
               existing_type=mysql.DATETIME(),
               comment=None,
               existing_comment='记录时间',
               existing_nullable=True)
        batch_op.alter_column('info_json',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='通知记录',
               existing_nullable=True)
        batch_op.alter_column('username',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='用户名',
               existing_nullable=True)
        batch_op.alter_column('status_more',
               existing_type=sa.Text(),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('spec',
               existing_type=sa.Text(length=655360),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='配置详情',
               existing_nullable=True)
        batch_op.alter_column('labels',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='标签',
               existing_nullable=True)
        batch_op.alter_column('annotations',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='注释',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('change_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='修改时间',
               existing_nullable=True)
        batch_op.alter_column('create_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='创建时间',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('cluster',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='k8s集群',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('workflow', schema=None) as batch_op:
        batch_op.alter_column('foreign_key',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='外键',
               existing_nullable=True)
        batch_op.alter_column('add_row_time',
               existing_type=mysql.DATETIME(),
               comment=None,
               existing_comment='记录时间',
               existing_nullable=True)
        batch_op.alter_column('info_json',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='通知记录',
               existing_nullable=True)
        batch_op.alter_column('username',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='用户名',
               existing_nullable=True)
        batch_op.alter_column('status_more',
               existing_type=sa.Text(),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('spec',
               existing_type=sa.Text(length=655360),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='配置详情',
               existing_nullable=True)
        batch_op.alter_column('labels',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='标签',
               existing_nullable=True)
        batch_op.alter_column('annotations',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='注释',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('change_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='修改时间',
               existing_nullable=True)
        batch_op.alter_column('create_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='创建时间',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('cluster',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='k8s集群',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('tfjob', schema=None) as batch_op:
        batch_op.alter_column('foreign_key',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='外键',
               existing_nullable=True)
        batch_op.alter_column('add_row_time',
               existing_type=mysql.DATETIME(),
               comment=None,
               existing_comment='记录时间',
               existing_nullable=True)
        batch_op.alter_column('info_json',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='通知记录',
               existing_nullable=True)
        batch_op.alter_column('username',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='用户名',
               existing_nullable=True)
        batch_op.alter_column('status_more',
               existing_type=sa.Text(),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('spec',
               existing_type=sa.Text(length=655360),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='配置详情',
               existing_nullable=True)
        batch_op.alter_column('labels',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='标签',
               existing_nullable=True)
        batch_op.alter_column('annotations',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='注释',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('change_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='修改时间',
               existing_nullable=True)
        batch_op.alter_column('create_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='创建时间',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('cluster',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='k8s集群',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('task', schema=None) as batch_op:
        batch_op.alter_column('skip',
               existing_type=mysql.TINYINT(display_width=1),
               comment=None,
               existing_comment='是否跳过',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('monitoring',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='该任务的监控信息',
               existing_nullable=True)
        batch_op.alter_column('outputs',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='task的输出，会将输出复制到minio上 ',
               existing_nullable=True)
        batch_op.alter_column('retry',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='重试次数',
               existing_nullable=False)
        batch_op.alter_column('timeout',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='超时',
               existing_nullable=False)
        batch_op.alter_column('resource_gpu',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请gpu',
               existing_nullable=True)
        batch_op.alter_column('resource_cpu',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请cpu',
               existing_nullable=True)
        batch_op.alter_column('resource_memory',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请内存',
               existing_nullable=True)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=sa.String(length=2000),
               type_=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='挂载',
               existing_nullable=True)
        batch_op.alter_column('args',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='任务启动参数',
               existing_nullable=True)
        batch_op.alter_column('overwrite_entrypoint',
               existing_type=mysql.TINYINT(display_width=1),
               comment=None,
               existing_comment='是否覆盖模板中的入口点',
               existing_nullable=True)
        batch_op.alter_column('command',
               existing_type=mysql.VARCHAR(length=1000),
               comment=None,
               existing_comment='启动命令',
               existing_nullable=True)
        batch_op.alter_column('working_dir',
               existing_type=mysql.VARCHAR(length=1000),
               comment=None,
               existing_comment='启动目录',
               existing_nullable=True)
        batch_op.alter_column('pipeline_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('job_template_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='任务模板id',
               existing_nullable=True)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='中文名',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('sqlab_query', schema=None) as batch_op:
        batch_op.alter_column('username',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='用户名',
               existing_nullable=False)
        batch_op.alter_column('err_msg',
               existing_type=sa.Text(),
               type_=mysql.VARCHAR(length=5000),
               comment=None,
               existing_comment='报错消息',
               existing_nullable=True)
        batch_op.alter_column('result_line_num',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='结果行数',
               existing_nullable=False)
        batch_op.alter_column('result_url',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='结果url',
               existing_nullable=False)
        batch_op.alter_column('ui_url',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='任务url',
               existing_nullable=False)
        batch_op.alter_column('log_url',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='日志url',
               existing_nullable=False)
        batch_op.alter_column('task_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='任务id',
               existing_nullable=False)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=11),
               comment=None,
               existing_comment='状态',
               existing_nullable=False)
        batch_op.alter_column('stage',
               existing_type=mysql.VARCHAR(length=11),
               comment=None,
               existing_comment='阶段',
               existing_nullable=False)
        batch_op.alter_column('deli',
               existing_type=mysql.VARCHAR(length=11),
               comment=None,
               existing_comment='分隔符',
               existing_nullable=False)
        batch_op.alter_column('engine',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='引擎',
               existing_nullable=False)
        batch_op.alter_column('qsql',
               existing_type=mysql.VARCHAR(length=5000),
               comment=None,
               existing_comment='sql语句',
               existing_nullable=False)
        batch_op.alter_column('engine_arg2',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='引擎参数2',
               existing_nullable=False)
        batch_op.alter_column('engine_arg1',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='引擎参数1',
               existing_nullable=False)
        batch_op.alter_column('end_time',
               existing_type=mysql.VARCHAR(length=40),
               comment=None,
               existing_comment='结束时间',
               existing_nullable=False)
        batch_op.alter_column('start_time',
               existing_type=mysql.VARCHAR(length=40),
               comment=None,
               existing_comment='启动时间',
               existing_nullable=False)
        batch_op.alter_column('submit_time',
               existing_type=mysql.VARCHAR(length=40),
               comment=None,
               existing_comment='提交时间',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('service', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('host',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='域名',
               existing_nullable=True)
        batch_op.alter_column('deploy_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='部署时间',
               existing_nullable=False)
        batch_op.alter_column('resource_gpu',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请gpu',
               existing_nullable=True)
        batch_op.alter_column('resource_cpu',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请cpu',
               existing_nullable=True)
        batch_op.alter_column('resource_memory',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请内存',
               existing_nullable=True)
        batch_op.alter_column('ports',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='端口',
               existing_nullable=True)
        batch_op.alter_column('replicas',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='副本',
               existing_nullable=True)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=sa.String(length=2000),
               type_=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='挂载',
               existing_nullable=True)
        batch_op.alter_column('env',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='环境变量',
               existing_nullable=True)
        batch_op.alter_column('args',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='启动参数',
               existing_nullable=True)
        batch_op.alter_column('command',
               existing_type=mysql.VARCHAR(length=1000),
               comment=None,
               existing_comment='启动命令',
               existing_nullable=True)
        batch_op.alter_column('working_dir',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='启动目录',
               existing_nullable=True)
        batch_op.alter_column('images',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='镜像',
               existing_nullable=False)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='中文名',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('run', schema=None) as batch_op:
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('execution_date',
               existing_type=sa.String(length=200),
               type_=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='执行时间',
               existing_nullable=False)
        batch_op.alter_column('created_on',
               existing_type=mysql.DATETIME(),
               comment=None,
               existing_comment='创建时间',
               existing_nullable=False)
        batch_op.alter_column('message',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='消息',
               existing_nullable=True)
        batch_op.alter_column('run_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='run id',
               existing_nullable=True)
        batch_op.alter_column('experiment_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='实验id',
               existing_nullable=True)
        batch_op.alter_column('version_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='上传的版本号',
               existing_nullable=True)
        batch_op.alter_column('pipeline_argo_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='任务流 argo id',
               existing_nullable=True)
        batch_op.alter_column('pipeline_file',
               existing_type=sa.Text(length=655360),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='workflow yaml',
               existing_nullable=True)
        batch_op.alter_column('pipeline_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='任务流id',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('repository', schema=None) as batch_op:
        batch_op.alter_column('hubsecret',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='k8s secret名',
               existing_nullable=True)
        batch_op.alter_column('password',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='密码',
               existing_nullable=False)
        batch_op.alter_column('user',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='账户',
               existing_nullable=False)
        batch_op.alter_column('server',
               existing_type=sa.String(length=200),
               type_=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='仓库地址',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=sa.String(length=200),
               type_=mysql.VARCHAR(length=50),
               comment=None,
               existing_comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('pytorchjob', schema=None) as batch_op:
        batch_op.alter_column('foreign_key',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='外键',
               existing_nullable=True)
        batch_op.alter_column('add_row_time',
               existing_type=mysql.DATETIME(),
               comment=None,
               existing_comment='记录时间',
               existing_nullable=True)
        batch_op.alter_column('info_json',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='通知记录',
               existing_nullable=True)
        batch_op.alter_column('username',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='用户名',
               existing_nullable=True)
        batch_op.alter_column('status_more',
               existing_type=sa.Text(),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('spec',
               existing_type=sa.Text(length=655360),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='配置详情',
               existing_nullable=True)
        batch_op.alter_column('labels',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='标签',
               existing_nullable=True)
        batch_op.alter_column('annotations',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='注释',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('change_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='修改时间',
               existing_nullable=True)
        batch_op.alter_column('create_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='创建时间',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('cluster',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='k8s集群',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('project_user', schema=None) as batch_op:
        batch_op.alter_column('role',
               existing_type=mysql.ENUM('dev', 'ops', 'creator'),
               comment=None,
               existing_comment='角色',
               existing_nullable=False)
        batch_op.alter_column('user_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='用户id',
               existing_nullable=False)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('project', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('type',
               existing_type=mysql.VARCHAR(length=50),
               comment=None,
               existing_comment='类型，org, job_template, model',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=sa.String(length=500),
               type_=mysql.TEXT(),
               comment=None,
               existing_comment='描述',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=50),
               comment=None,
               existing_comment='名称',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('pipeline', schema=None) as batch_op:
        batch_op.alter_column('parameter',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='前端保留参数，用于记录编排样式',
               existing_nullable=True)
        batch_op.alter_column('expired_limit',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='过期保留个数，此数值有效时，会优先使用，覆盖max_active_runs的功能',
               existing_nullable=False)
        batch_op.alter_column('max_active_runs',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='最大同时运行的pipeline实例',
               existing_nullable=False)
        batch_op.alter_column('depends_on_past',
               existing_type=mysql.TINYINT(display_width=1),
               comment=None,
               existing_comment='是否依赖过往实例',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('alert_user',
               existing_type=mysql.VARCHAR(length=300),
               comment=None,
               existing_comment='报警接收人',
               existing_nullable=True)
        batch_op.alter_column('alert_status',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment=' 哪些状态会报警Pending,Running,Succeeded,Failed,Unknown,Waiting,Terminated',
               existing_nullable=True)
        batch_op.alter_column('parallelism',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='同一个pipeline，最大并行的task数目',
               existing_nullable=False)
        batch_op.alter_column('image_pull_policy',
               existing_type=mysql.ENUM('Always', 'IfNotPresent'),
               comment=None,
               existing_comment='镜像拉取策略',
               existing_nullable=False)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('run_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='workflow run id',
               existing_nullable=True)
        batch_op.alter_column('version_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='workflow version id',
               existing_nullable=True)
        batch_op.alter_column('pipeline_argo_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='argo workflow id',
               existing_nullable=True)
        batch_op.alter_column('pipeline_file',
               existing_type=sa.Text(length=655360),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='workflow yaml文件',
               existing_nullable=True)
        batch_op.alter_column('cronjob_start_time',
               existing_type=mysql.VARCHAR(length=300),
               comment=None,
               existing_comment='定时调度补录起点',
               existing_nullable=True)
        batch_op.alter_column('cron_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='调度周期',
               existing_nullable=True)
        batch_op.alter_column('schedule_type',
               existing_type=mysql.ENUM('once', 'crontab'),
               comment=None,
               existing_comment='调度类型',
               existing_nullable=False)
        batch_op.alter_column('global_env',
               existing_type=mysql.VARCHAR(length=500),
               comment=None,
               existing_comment='全局环境变量',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('dag_json',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='上下游关系',
               existing_nullable=False)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='描述',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('notebook', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('resource_gpu',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请gpu',
               existing_nullable=True)
        batch_op.alter_column('resource_cpu',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请cpu',
               existing_nullable=True)
        batch_op.alter_column('resource_memory',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请内存',
               existing_nullable=True)
        batch_op.alter_column('image_pull_policy',
               existing_type=mysql.ENUM('Always', 'IfNotPresent'),
               comment=None,
               existing_comment='镜像拉取策略',
               existing_nullable=True)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=sa.String(length=2000),
               type_=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='挂载',
               existing_nullable=True)
        batch_op.alter_column('env',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='环境变量',
               existing_nullable=True)
        batch_op.alter_column('working_dir',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='工作目录',
               existing_nullable=True)
        batch_op.alter_column('ide_type',
               existing_type=sa.String(length=100),
               type_=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='ide类型',
               existing_nullable=True)
        batch_op.alter_column('images',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='镜像',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=sa.String(length=200),
               type_=mysql.TEXT(),
               comment=None,
               existing_comment='描述',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('nni', schema=None) as batch_op:
        batch_op.alter_column('alert_status',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='哪些状态会报警Pending,Running,Succeeded,Failed,Unknown,Waiting,Terminated',
               existing_nullable=True)
        batch_op.alter_column('experiment',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='构建出来的实验体',
               existing_nullable=True)
        batch_op.alter_column('resource_gpu',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请gpu',
               existing_nullable=True)
        batch_op.alter_column('resource_cpu',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请cpu',
               existing_nullable=True)
        batch_op.alter_column('resource_memory',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请内存',
               existing_nullable=True)
        batch_op.alter_column('image_pull_policy',
               existing_type=mysql.ENUM('Always', 'IfNotPresent'),
               comment=None,
               existing_comment='镜像拉取策略',
               existing_nullable=False)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=sa.String(length=2000),
               type_=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='挂载',
               existing_nullable=True)
        batch_op.alter_column('working_dir',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='启动目录',
               existing_nullable=True)
        batch_op.alter_column('job_worker_command',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='执行命令',
               existing_nullable=True)
        batch_op.alter_column('job_worker_image',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='执行镜像',
               existing_nullable=True)
        batch_op.alter_column('trial_spec',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='根据不同算法和参数写入的task模板',
               existing_nullable=True)
        batch_op.alter_column('job_json',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='根据不同算法和参数写入的task模板',
               existing_nullable=True)
        batch_op.alter_column('parameters',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='搜索超参的配置',
               existing_nullable=True)
        batch_op.alter_column('algorithm_setting',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='算法配置',
               existing_nullable=True)
        batch_op.alter_column('algorithm_name',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='算法名',
               existing_nullable=False)
        batch_op.alter_column('objective_additional_metric_names',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='附加目标度量名',
               existing_nullable=True)
        batch_op.alter_column('objective_metric_name',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='目标度量名称',
               existing_nullable=False)
        batch_op.alter_column('objective_goal',
               existing_type=mysql.FLOAT(),
               comment=None,
               existing_comment='搜索目标值',
               existing_nullable=False)
        batch_op.alter_column('objective_type',
               existing_type=mysql.ENUM('maximize', 'minimize'),
               comment=None,
               existing_comment='搜索目标类型',
               existing_nullable=False)
        batch_op.alter_column('max_failed_trial_count',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='最大失败次数',
               existing_nullable=True)
        batch_op.alter_column('max_trial_count',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='最大搜索次数',
               existing_nullable=True)
        batch_op.alter_column('maxExecDuration',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='最大执行时长',
               existing_nullable=True)
        batch_op.alter_column('parallel_trial_count',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='最大并行数',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='描述',
               existing_nullable=True)
        batch_op.alter_column('namespace',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='命名空间',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('job_type',
               existing_type=mysql.ENUM('Job'),
               comment=None,
               existing_comment='任务类型',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('model', schema=None) as batch_op:
        batch_op.alter_column('api_type',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='api类型',
               existing_nullable=True)
        batch_op.alter_column('md5',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='md5值',
               existing_nullable=True)
        batch_op.alter_column('metrics',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='指标',
               existing_nullable=True)
        batch_op.alter_column('framework',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='训练框架',
               existing_nullable=True)
        batch_op.alter_column('run_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='运行时间',
               existing_nullable=True)
        batch_op.alter_column('run_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='run id',
               existing_nullable=False)
        batch_op.alter_column('pipeline_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='任务流id',
               existing_nullable=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('download_url',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='下载url',
               existing_nullable=True)
        batch_op.alter_column('path',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='模型路径',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=1000),
               comment=None,
               existing_comment='描述',
               existing_nullable=True)
        batch_op.alter_column('version',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='版本',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('metadata_table', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('ttl',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='保留时长',
               existing_nullable=True)
        batch_op.alter_column('warehouse_level',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='数仓级别',
               existing_nullable=True)
        batch_op.alter_column('value_score',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='价值评估',
               existing_nullable=True)
        batch_op.alter_column('security_level',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='安全等级',
               existing_nullable=True)
        batch_op.alter_column('field',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='所属数据域',
               existing_nullable=True)
        batch_op.alter_column('data_source',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='数据来源',
               existing_nullable=True)
        batch_op.alter_column('is_privilege',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='是否特权',
               existing_nullable=False)
        batch_op.alter_column('partition_update_mode',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='分区更新模式',
               existing_nullable=True)
        batch_op.alter_column('col_info',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='列信息',
               existing_nullable=True)
        batch_op.alter_column('create_table_ddl',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='建表语句',
               existing_nullable=True)
        batch_op.alter_column('creator',
               existing_type=mysql.VARCHAR(length=255),
               comment=None,
               existing_comment='创建者',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=255),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('partition_end',
               existing_type=mysql.VARCHAR(length=255),
               comment=None,
               existing_comment='分区终点',
               existing_nullable=True)
        batch_op.alter_column('partition_start',
               existing_type=mysql.VARCHAR(length=255),
               comment=None,
               existing_comment='分区起点',
               existing_nullable=True)
        batch_op.alter_column('recent_visit',
               existing_type=sa.DATE(),
               comment=None,
               existing_comment='最新被访问时间',
               existing_nullable=True)
        batch_op.alter_column('visits_sixty',
               existing_type=mysql.BIGINT(),
               comment=None,
               existing_comment='60日访问量',
               existing_nullable=True)
        batch_op.alter_column('visits_thirty',
               existing_type=mysql.BIGINT(),
               comment=None,
               existing_comment='30日访问量',
               existing_nullable=True)
        batch_op.alter_column('visits_seven',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='7日访问量',
               existing_nullable=True)
        batch_op.alter_column('storage_cost',
               existing_type=mysql.FLOAT(),
               comment=None,
               existing_comment='存储成本',
               existing_nullable=True)
        batch_op.alter_column('storage_size',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='存储大小',
               existing_nullable=True)
        batch_op.alter_column('rec_lifecycle',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='推荐生命周期',
               existing_nullable=True)
        batch_op.alter_column('lifecycle',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='生命周期',
               existing_nullable=True)
        batch_op.alter_column('owner',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='责任人',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='描述',
               existing_nullable=True)
        batch_op.alter_column('metadata_column',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='列信息',
               existing_nullable=True)
        batch_op.alter_column('table',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='表名',
               existing_nullable=True)
        batch_op.alter_column('db',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='库名',
               existing_nullable=True)
        batch_op.alter_column('c_org_fullname',
               existing_type=mysql.VARCHAR(length=255),
               comment=None,
               existing_comment='所属组织架构',
               existing_nullable=True)
        batch_op.alter_column('app',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='所属应用',
               existing_nullable=True)
        batch_op.alter_column('node_id',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='唯一性id',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('metadata_metric', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('remark',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='备注',
               existing_nullable=True)
        batch_op.alter_column('public',
               existing_type=mysql.TINYINT(display_width=1),
               comment=None,
               existing_comment='是否公开',
               existing_nullable=True)
        batch_op.alter_column('task_id',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='所有相关任务id',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='状态  下线  上线   创建中',
               existing_nullable=True)
        batch_op.alter_column('metric_responsible',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='指标负责人',
               existing_nullable=True)
        batch_op.alter_column('metric_data_type',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='指标类型  营收/规模/商业化',
               existing_nullable=True)
        batch_op.alter_column('metric_dim',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='指标维度   天  月   周',
               existing_nullable=True)
        batch_op.alter_column('metric_level',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='指标等级   普通  重要  核心',
               existing_nullable=True)
        batch_op.alter_column('metric_type',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='指标类型  \t原子指标  衍生指标',
               existing_nullable=True)
        batch_op.alter_column('caliber',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='数据负责人',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=500),
               comment=None,
               existing_comment='描述',
               existing_nullable=False)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=300),
               comment=None,
               existing_comment='中文名',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=300),
               comment=None,
               existing_comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('app',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='应用名',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('logs', schema=None) as batch_op:
        batch_op.alter_column('referrer',
               existing_type=mysql.VARCHAR(length=1024),
               comment=None,
               existing_comment='来源地址',
               existing_nullable=True)
        batch_op.alter_column('duration_ms',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='持续时长',
               existing_nullable=True)
        batch_op.alter_column('dttm',
               existing_type=mysql.DATETIME(),
               comment=None,
               existing_comment='访问时间',
               existing_nullable=True)
        batch_op.alter_column('json',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='请求提',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('path',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='访问地址',
               existing_nullable=True)
        batch_op.alter_column('method',
               existing_type=mysql.VARCHAR(length=50),
               comment=None,
               existing_comment='方法',
               existing_nullable=True)
        batch_op.alter_column('action',
               existing_type=mysql.VARCHAR(length=512),
               comment=None,
               existing_comment='动作',
               existing_nullable=True)
        batch_op.alter_column('user_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='用户id',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('job_template', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('demo',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='配置示例',
               existing_nullable=True)
        batch_op.alter_column('accounts',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='使用k8s账户',
               existing_nullable=True)
        batch_op.alter_column('privileged',
               existing_type=mysql.TINYINT(display_width=1),
               comment=None,
               existing_comment=' 是否启用特权模式',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=sa.String(length=2000),
               type_=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='强制必须挂载',
               existing_nullable=True)
        batch_op.alter_column('env',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='默认自带的环境变量',
               existing_nullable=True)
        batch_op.alter_column('args',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='启动参数',
               existing_nullable=True)
        batch_op.alter_column('entrypoint',
               existing_type=mysql.VARCHAR(length=2000),
               comment=None,
               existing_comment='入口点',
               existing_nullable=True)
        batch_op.alter_column('workdir',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='工作目录',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=sa.String(length=500),
               type_=mysql.TEXT(),
               comment=None,
               existing_comment='描述',
               existing_nullable=False)
        batch_op.alter_column('hostAliases',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='域名映射',
               existing_nullable=True)
        batch_op.alter_column('images_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='镜像id',
               existing_nullable=True)
        batch_op.alter_column('version',
               existing_type=mysql.ENUM('Release', 'Alpha'),
               comment=None,
               existing_comment='版本',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=sa.String(length=500),
               type_=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('inferenceservice', schema=None) as batch_op:
        batch_op.alter_column('priority',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='优先级',
               existing_nullable=True)
        batch_op.alter_column('deploy_history',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='部署历史',
               existing_nullable=True)
        batch_op.alter_column('run_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='运行时间',
               existing_nullable=True)
        batch_op.alter_column('run_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='run id',
               existing_nullable=True)
        batch_op.alter_column('shadow',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='灰度发布',
               existing_nullable=True)
        batch_op.alter_column('canary',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='灰度发布',
               existing_nullable=True)
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('host',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='域名',
               existing_nullable=True)
        batch_op.alter_column('deploy_time',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='部署时间',
               existing_nullable=True)
        batch_op.alter_column('resource_gpu',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请gpu',
               existing_nullable=True)
        batch_op.alter_column('resource_cpu',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请cpu',
               existing_nullable=True)
        batch_op.alter_column('resource_memory',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='申请内存',
               existing_nullable=True)
        batch_op.alter_column('ports',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='端口',
               existing_nullable=True)
        batch_op.alter_column('sidecar',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='伴随容器',
               existing_nullable=True)
        batch_op.alter_column('health',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='健康检查',
               existing_nullable=True)
        batch_op.alter_column('metrics',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='监控接口',
               existing_nullable=True)
        batch_op.alter_column('hpa',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='弹性伸缩',
               existing_nullable=True)
        batch_op.alter_column('max_replicas',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='最大副本数',
               existing_nullable=True)
        batch_op.alter_column('min_replicas',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='最小副本数',
               existing_nullable=True)
        batch_op.alter_column('node_selector',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='机器选择器',
               existing_nullable=True)
        batch_op.alter_column('volume_mount',
               existing_type=sa.String(length=2000),
               type_=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='挂载',
               existing_nullable=True)
        batch_op.alter_column('env',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='环境变量',
               existing_nullable=True)
        batch_op.alter_column('args',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='启动参数',
               existing_nullable=True)
        batch_op.alter_column('command',
               existing_type=mysql.VARCHAR(length=1000),
               comment=None,
               existing_comment='启动命令',
               existing_nullable=True)
        batch_op.alter_column('working_dir',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='启动目录',
               existing_nullable=True)
        batch_op.alter_column('images',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='镜像',
               existing_nullable=False)
        batch_op.alter_column('transformer',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='预处理',
               existing_nullable=True)
        batch_op.alter_column('model_status',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='服务状态',
               existing_nullable=True)
        batch_op.alter_column('inference_config',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='配置文件',
               existing_nullable=True)
        batch_op.alter_column('model_output',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='模型输出',
               existing_nullable=True)
        batch_op.alter_column('model_input',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='模型输入',
               existing_nullable=True)
        batch_op.alter_column('model_type',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='模型类型',
               existing_nullable=True)
        batch_op.alter_column('model_path',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='模型地址',
               existing_nullable=True)
        batch_op.alter_column('model_version',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='模型版本',
               existing_nullable=True)
        batch_op.alter_column('model_name',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='模型名',
               existing_nullable=True)
        batch_op.alter_column('service_type',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='服务类型',
               existing_nullable=True)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='中文名',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('images', schema=None) as batch_op:
        batch_op.alter_column('gitpath',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='git地址',
               existing_nullable=True)
        batch_op.alter_column('dockerfile',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='dockerfile',
               existing_nullable=True)
        batch_op.alter_column('entrypoint',
               existing_type=mysql.VARCHAR(length=2000),
               comment=None,
               existing_comment='入口点',
               existing_nullable=True)
        batch_op.alter_column('repository_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='仓库id',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=sa.String(length=1000),
               type_=mysql.TEXT(),
               comment=None,
               existing_comment='描述',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=sa.String(length=500),
               type_=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('favorite', schema=None) as batch_op:
        batch_op.alter_column('user_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='用户id',
               existing_nullable=True)
        batch_op.alter_column('row_id',
               existing_type=mysql.VARCHAR(length=500),
               comment=None,
               existing_comment='数据id',
               existing_nullable=False)
        batch_op.alter_column('model_name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='数据结构',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('etl_task', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('etl_task_id',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='远程调度系统任务id',
               existing_nullable=False)
        batch_op.alter_column('task_args',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='任务参数',
               existing_nullable=True)
        batch_op.alter_column('template',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='任务模板',
               existing_nullable=False)
        batch_op.alter_column('etl_pipeline_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='任务流id',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='描述',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('etl_pipeline', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('config',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='pipeline的全局配置',
               existing_nullable=True)
        batch_op.alter_column('dag_json',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='pipeline的上下游关系',
               existing_nullable=True)
        batch_op.alter_column('workflow',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='调度引擎',
               existing_nullable=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='描述',
               existing_nullable=False)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=100),
               comment=None,
               existing_comment='英文名',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('docker', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('consecutive_build',
               existing_type=mysql.TINYINT(display_width=1),
               comment=None,
               existing_comment='连续构建',
               existing_nullable=True)
        batch_op.alter_column('need_gpu',
               existing_type=mysql.TINYINT(display_width=1),
               comment=None,
               existing_comment='是否需要gpu',
               existing_nullable=True)
        batch_op.alter_column('last_image',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='最后生成镜像',
               existing_nullable=True)
        batch_op.alter_column('target_image',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='目标镜像',
               existing_nullable=True)
        batch_op.alter_column('base_image',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='基础镜像',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='描述',
               existing_nullable=True)
        batch_op.alter_column('project_id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='项目组id',
               existing_nullable=False)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('dimension', schema=None) as batch_op:
        batch_op.alter_column('status',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('columns',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='列信息',
               existing_nullable=True)
        batch_op.alter_column('owner',
               existing_type=mysql.VARCHAR(length=2000),
               comment=None,
               existing_comment='责任人',
               existing_nullable=True)
        batch_op.alter_column('app',
               existing_type=mysql.VARCHAR(length=255),
               comment=None,
               existing_comment='应用名',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=2000),
               comment=None,
               existing_comment='描述',
               existing_nullable=True)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=255),
               comment=None,
               existing_comment='中文名',
               existing_nullable=True)
        batch_op.alter_column('table_name',
               existing_type=mysql.VARCHAR(length=255),
               comment=None,
               existing_comment='表名',
               existing_nullable=True)
        batch_op.alter_column('sqllchemy_uri',
               existing_type=mysql.VARCHAR(length=255),
               comment=None,
               existing_comment='sql链接串',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('dataset', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=sa.Text(length=65536),
               type_=mysql.MEDIUMTEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('owner',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='责任人，*表示全部可见',
               existing_nullable=True)
        batch_op.alter_column('metric_info',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='数据集，指标信息',
               existing_nullable=True)
        batch_op.alter_column('features',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='特征信息',
               existing_nullable=True)
        batch_op.alter_column('info',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='数据集，内容信息',
               existing_nullable=True)
        batch_op.alter_column('secret',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='秘钥，数据集的秘钥',
               existing_nullable=True)
        batch_op.alter_column('price',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='价格',
               existing_nullable=True)
        batch_op.alter_column('duration',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='时长',
               existing_nullable=True)
        batch_op.alter_column('entries_num',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='记录数目',
               existing_nullable=True)
        batch_op.alter_column('storage_size',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='存储大小',
               existing_nullable=True)
        batch_op.alter_column('download_url',
               existing_type=mysql.VARCHAR(length=1000),
               comment=None,
               existing_comment='下载地址',
               existing_nullable=True)
        batch_op.alter_column('path',
               existing_type=mysql.VARCHAR(length=400),
               comment=None,
               existing_comment='本地的持久化路径',
               existing_nullable=True)
        batch_op.alter_column('url',
               existing_type=mysql.VARCHAR(length=1000),
               comment=None,
               existing_comment='关联url',
               existing_nullable=True)
        batch_op.alter_column('years',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='年份',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='文件类型  有待校验，已下线',
               existing_nullable=True)
        batch_op.alter_column('file_type',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='文件类型，图片 png，音频',
               existing_nullable=True)
        batch_op.alter_column('storage_class',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='存储类型，压缩',
               existing_nullable=True)
        batch_op.alter_column('research',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='研究方向',
               existing_nullable=True)
        batch_op.alter_column('usage',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='数据用途',
               existing_nullable=True)
        batch_op.alter_column('field',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='数据领域，视觉，听觉，文本',
               existing_nullable=True)
        batch_op.alter_column('icon',
               existing_type=mysql.VARCHAR(length=2000),
               comment=None,
               existing_comment='图标svg内容',
               existing_nullable=True)
        batch_op.alter_column('industry',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='行业',
               existing_nullable=True)
        batch_op.alter_column('source',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='数据集来源，github, 天池',
               existing_nullable=True)
        batch_op.alter_column('source_type',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='数据集来源，开源，资产，采购',
               existing_nullable=True)
        batch_op.alter_column('doc',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='数据集的文档页面',
               existing_nullable=True)
        batch_op.alter_column('segment',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='可以追加数据块，避免整块更新，记录分区信息。分区名，文件文件信息',
               existing_nullable=True)
        batch_op.alter_column('split',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment=' train test val等',
               existing_nullable=True)
        batch_op.alter_column('subdataset',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment=' 数据子集名称，例如英文数据子集，中文数据子集',
               existing_nullable=True)
        batch_op.alter_column('version',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='版本',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=2000),
               comment=None,
               existing_comment='描述',
               existing_nullable=True)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='中文名',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('aihub', schema=None) as batch_op:
        batch_op.alter_column('expand',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='扩展参数',
               existing_nullable=True)
        batch_op.alter_column('price',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='价格',
               existing_nullable=True)
        batch_op.alter_column('hot',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='热度',
               existing_nullable=True)
        batch_op.alter_column('version',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='版本',
               existing_nullable=True)
        batch_op.alter_column('service',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='服务化参数',
               existing_nullable=True)
        batch_op.alter_column('inference',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='推理服务的配置',
               existing_nullable=True)
        batch_op.alter_column('pre_train_model',
               existing_type=mysql.VARCHAR(length=2000),
               comment=None,
               existing_comment='预训练模型地址',
               existing_nullable=True)
        batch_op.alter_column('pipeline',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='pipeline微调的配置',
               existing_nullable=True)
        batch_op.alter_column('job_template',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='任务模板参数',
               existing_nullable=True)
        batch_op.alter_column('notebook',
               existing_type=mysql.VARCHAR(length=2000),
               comment=None,
               existing_comment='notebook的配置',
               existing_nullable=True)
        batch_op.alter_column('dataset',
               existing_type=mysql.TEXT(),
               comment=None,
               existing_comment='数据集的配置',
               existing_nullable=True)
        batch_op.alter_column('images',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='docker镜像',
               existing_nullable=True)
        batch_op.alter_column('pic',
               existing_type=mysql.VARCHAR(length=500),
               comment=None,
               existing_comment='示例图片',
               existing_nullable=True)
        batch_op.alter_column('source',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='来源',
               existing_nullable=True)
        batch_op.alter_column('describe',
               existing_type=mysql.VARCHAR(length=2000),
               comment=None,
               existing_comment='描述',
               existing_nullable=True)
        batch_op.alter_column('label',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='中文名',
               existing_nullable=True)
        batch_op.alter_column('type',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='类型',
               existing_nullable=True)
        batch_op.alter_column('scenes',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='应用场景',
               existing_nullable=True)
        batch_op.alter_column('field',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='领域',
               existing_nullable=True)
        batch_op.alter_column('name',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='英文名',
               existing_nullable=True)
        batch_op.alter_column('doc',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='文档地址',
               existing_nullable=True)
        batch_op.alter_column('status',
               existing_type=mysql.VARCHAR(length=200),
               comment=None,
               existing_comment='状态',
               existing_nullable=True)
        batch_op.alter_column('uuid',
               existing_type=mysql.VARCHAR(length=2000),
               comment=None,
               existing_comment='当前版本的唯一主键',
               existing_nullable=True)
        batch_op.alter_column('id',
               existing_type=mysql.INTEGER(),
               comment=None,
               existing_comment='id主键',
               existing_nullable=False,
               autoincrement=True)

    with op.batch_alter_table('ab_user', schema=None) as batch_op:
        batch_op.drop_column('ls_token')

    # ### end Alembic commands ###
