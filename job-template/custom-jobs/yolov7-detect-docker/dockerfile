FROM ccr.ccs.tencentyun.com/cube-studio/yolov7:2024.01
RUN apt update

# 安装运维工具
RUN apt install -y --force-yes --no-install-recommends vim apt-transport-https gnupg2 ca-certificates-java rsync jq  wget git dnsutils iputils-ping net-tools curl mysql-client locales zip

# 安装python
# RUN apt install -y python3.6-dev python3-pip libsasl2-dev libpq-dev \
# 	&& ln -s /usr/bin/python3 /usr/bin/python \
# 	&& ln -s /usr/bin/pip3 /usr/bin/pip \
# 	&& pip install --upgrade pip


# 安装中文
RUN apt install -y --force-yes --no-install-recommends locales ttf-wqy-microhei ttf-wqy-zenhei xfonts-wqy && locale-gen zh_CN && locale-gen zh_CN.utf8
ENV LANG zh_CN.UTF-8
ENV LC_ALL zh_CN.UTF-8
ENV LANGUAGE zh_CN.UTF-8

# 便捷操作
RUN echo "alias ll='ls -alF'" >> /root/.bashrc && \
	echo "alias la='ls -A'" >> /root/.bashrc && \
	echo "alias vi='vim'" >> /root/.bashrc && \
	/bin/bash -c "source /root/.bashrc"

RUN apt install -y libgl1-mesa-glx
RUN pip install flask werkzeug requests tornado
RUN pip install Pillow pysnooper 
# COPY ./detect_test.py /yolov7
# COPY ./server-web-yolov7-syt.py /yolov7
# RUN mkdir /yolov7/static
# COPY ./yolov7_best.pt /yolov7
# COPY static/ /yolov7/static
# RUN mkdir /images
# COPY 1.jpg /images


# COPY ./service_deploy/ /yolov7
ENTRYPOINT ["bash"]
